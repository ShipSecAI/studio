global:
  namespaces:
    system: shipsec-system
    workers: shipsec-workers
    workloads: shipsec-workloads

secrets:
  create: true
  name: shipsec-app-secrets
  databaseUrl: postgresql://shipsec:shipsec@shipsec-postgres.shipsec-system.svc.cluster.local:5432/shipsec
  minioRootUser: minioadmin
  minioRootPassword: minioadmin

backend:
  enabled: true
  image:
    repository: ghcr.io/shipsecai/studio-backend
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 3211
  env:
    NODE_ENV: production
    SHIPSEC_ENV: local
    PORT: '3211'
    ENABLE_INGEST_SERVICES: 'false'
    TEMPORAL_ADDRESS: shipsec-temporal.shipsec-system.svc.cluster.local:7233
    TEMPORAL_NAMESPACE: shipsec-dev
    TEMPORAL_TASK_QUEUE: shipsec-dev
    MINIO_ENDPOINT: shipsec-minio.shipsec-system.svc.cluster.local
    MINIO_PORT: '9000'
    LOKI_URL: http://shipsec-loki.shipsec-system.svc.cluster.local:3100
    TERMINAL_REDIS_URL: redis://shipsec-redis.shipsec-system.svc.cluster.local:6379
    LOG_KAFKA_BROKERS: shipsec-redpanda.shipsec-system.svc.cluster.local:9092
    LOG_KAFKA_TOPIC: telemetry.logs
    LOG_KAFKA_CLIENT_ID: shipsec-backend
    EVENT_KAFKA_TOPIC: telemetry.events
    EVENT_KAFKA_CLIENT_ID: shipsec-backend-events
    EVENT_KAFKA_GROUP_ID: shipsec-event-ingestor
    AUTH_PROVIDER: local
  resources:
    requests:
      cpu: 200m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 2Gi

worker:
  enabled: true
  image:
    repository: ghcr.io/shipsecai/studio-worker
    tag: latest
    pullPolicy: IfNotPresent
  env:
    NODE_ENV: production
    SHIPSEC_ENV: local
    ENABLE_INGEST_SERVICES: 'false'
    TEMPORAL_ADDRESS: shipsec-temporal.shipsec-system.svc.cluster.local:7233
    TEMPORAL_NAMESPACE: shipsec-dev
    TEMPORAL_TASK_QUEUE: shipsec-dev
    MINIO_ENDPOINT: shipsec-minio.shipsec-system.svc.cluster.local
    MINIO_PORT: '9000'
    MINIO_BUCKET_NAME: shipsec-files
    LOKI_URL: http://shipsec-loki.shipsec-system.svc.cluster.local:3100
    TERMINAL_REDIS_URL: redis://shipsec-redis.shipsec-system.svc.cluster.local:6379
    TERMINAL_REDIS_MAXLEN: '5000'
    LOG_KAFKA_BROKERS: shipsec-redpanda.shipsec-system.svc.cluster.local:9092
    LOG_KAFKA_TOPIC: telemetry.logs
    LOG_KAFKA_CLIENT_ID: shipsec-worker
    EVENT_KAFKA_TOPIC: telemetry.events
    EVENT_KAFKA_CLIENT_ID: shipsec-worker-events
    BACKEND_URL: http://shipsec-backend.shipsec-system.svc.cluster.local:3211
  resources:
    requests:
      cpu: 500m
      memory: 1Gi
    limits:
      cpu: 2000m
      memory: 4Gi

frontend:
  enabled: true
  image:
    repository: ghcr.io/shipsecai/studio-frontend
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 8080
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

execution:
  # "docker" = use Docker CLI (local dev / DIND), "k8s" = K8s Jobs (GKE / production)
  mode: docker
  dind:
    enabled: false
    serviceName: shipsec-dind
    namespace: shipsec-workloads
    port: 2375
    storage:
      enabled: true
      size: 20Gi
  workerDockerHost: ''
  k8s:
    # Namespace where component Jobs are created
    jobNamespace: shipsec-workloads
    imagePullPolicy: IfNotPresent
    # Name of a K8s Secret with Docker registry credentials for pulling component images
    imagePullSecret: ''
